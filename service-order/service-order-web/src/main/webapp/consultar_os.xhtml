<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:p="http://primefaces.org/ui"
     xmlns:ui="http://java.sun.com/jsf/facelets">

<ui:composition template="/template.xhtml">

	<ui:define name="titulo">
		Consultar Ordem Serviço
	</ui:define>
	
	<ui:define name="body">
	<h:form id="formulario">
		<p:growl life="2000" autoUpdate="true"/>
		<p:messages autoUpdate="true"/>
		<p:fieldset legend="Consulta">
			<p class="consulta">Escolha um dos campos para realizar a pesquisa.</p>
			<p:panelGrid columns="4" styleClass="pesquisa">
				<p:outputLabel for="numOs" value="Número da OS"/>
				<p:inputText id="numOs" value="#{ordemServicoMBean.filtroId}">
					<p:ajax update="tabelaOs" event="keyup" listener="#{ordemServicoMBean.buscaPorId}"/>
				</p:inputText>
				
				<p:outputLabel for="buscaNome" value="Nome Cliente"/>
				<p:inputText id="buscaNome" value="#{ordemServicoMBean.filtroNome}">
					<p:ajax update="tabelaOs" event="keyup" listener="#{ordemServicoMBean.buscaPorNome}"/>
				</p:inputText>
			</p:panelGrid>
		
		</p:fieldset>
		
		<p:dataTable id="tabelaOs" var="os" value="#{ordemServicoMBean.ordensServicos}" emptyMessage="Não existe registro">
			<p:column headerText="" style="width:8%; text-align: center;">
				<p:commandLink action="#{ordemServicoMBean.detalhar(os)}" immediate="true">
					<i class="fa fa-search" />
				</p:commandLink>
				<p:commandLink action="#{ordemServicoMBean.alterar(os)}" immediate="true">
					<i class="fa fa-pencil-square-o" />
				</p:commandLink>
			</p:column>
			<p:column headerText="Número OS" style="width:11%; text-align: center;">
				<h:outputLabel value="#{os.numeroOS}" />
			</p:column>
			<p:column headerText="Nome Cliente" style="width:59%;">
				<h:outputLabel value="#{os.cliente.nome}" />
			</p:column>
			<p:column headerText="Celular" style="width:22%;">
				<h:outputLabel value="#{os.telefone.modelo}" />
			</p:column>
		</p:dataTable>
	</h:form>
	</ui:define>
</ui:composition>
</html>